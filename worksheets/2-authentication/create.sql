--Make sure you run the comman CREATE EXTENSION pgcrypto; in the terminal before loading in this file
DROP TABLE IF EXISTS USERS;
DROP TABLE IF EXISTS PRODUCTS;
DROP TABLE IF EXISTS USERS_EXTENDED;

CREATE TABLE USERS(
    USERNAME VARCHAR(255) UNIQUE NOT NULL,
    PASSWORD VARCHAR(255) NOT NULL
);

CREATE TABLE PRODUCTS(
    PRODUCT_ID INTEGER UNIQUE NOT NULL,
    PRODUCT_NAME VARCHAR(255) NOT NULL,
    PRODUCT_PRICE FLOAT NOT NULL
);

--Users table extended with acces_key and secret key columns
CREATE TABLE USERS_EXTENDED(
	USERNAME VARCHAR(255) UNIQUE NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	ACCESS_KEY BYTEA,
	SECRET_KEY BYTEA
);

INSERT INTO USERS (USERNAME,PASSWORD)
VALUES ('Mitko10343',crypt('password',gen_salt('bf')));
INSERT INTO USERS (USERNAME,PASSWORD)
VALUES ('Admin',crypt('password',gen_salt('bf')));
INSERT INTO USERS (USERNAME,PASSWORD)
VALUES ('Test',crypt('password',gen_salt('bf')));


INSERT INTO PRODUCTS(PRODUCT_ID,PRODUCT_NAME,PRODUCT_PRICE)
VALUES (1,'Apple',0.40);
INSERT INTO PRODUCTS(PRODUCT_ID,PRODUCT_NAME,PRODUCT_PRICE)
VALUES (2,'Banana',0.40);
INSERT INTO PRODUCTS(PRODUCT_ID,PRODUCT_NAME,PRODUCT_PRICE)
VALUES (3,'Pear',0.40);

INSERT INTO USERS_EXTENDED (USERNAME,PASSWORD,ACCESS_KEY,SECRET_KEY)
VALUES ('mitko10343',crypt('password',gen_salt('bf')),'7bb1c619f62194792687a86dfc887f879dfe953c','aeef7c9c0d558b264553681467fe2a22821205fc8cb7eaf377dee097a959d613f57683464cb3024ed0b6eb1fe0');
INSERT INTO USERS_EXTENDED (USERNAME,PASSWORD,ACCESS_KEY,SECRET_KEY)
VALUES ('admin',crypt('password',gen_salt('bf')),'1a6d4d3075c77260b4e9589b473db7d1abe9fe61','f106704fb01bb15bf724a1a0c2b3d52fca0e4c4de67273635497ef238e960ce6721d19d2e9229fa876c458dec1');
INSERT INTO USERS_EXTENDED (USERNAME,PASSWORD,ACCESS_KEY,SECRET_KEY)
VALUES ('test',crypt('password',gen_salt('bf')),'ff3f602a6020162b19b6a283349f968ceca222bf','c0cfbbe1242370077653264e15fc2583f56abfcade25d93433f29760af9a4d438e62c63b830b3dcc6ca8a2c5f3');